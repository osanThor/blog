---
title: Next Auth 적용하기
tags:
  - Next
  - Next-Auth
description: "Next Auth v5 beta를 적용해보자"
date: 2025.03.14
cover: "/posts/dev/20250314-next-auth/cover.jpg"
href: "20250314-next-auth"
category: dev
featured: true
draft: false
---

<Heading type="h2">Next Auth</Heading>

<Heading type="h3">Next Auth란?</Heading>

오늘은 NextAuth.js에 대해서 알아볼 겁니다! Next Auth 공식홈페이지 설명은 다음과 같습니다.

<Blockquote type="info">
  <b>
    Authentication for the Web.
    <br /> Free and open source.
  </b>
</Blockquote>

위와 같이 Web을 위한 **Authentication** 기능을 제공해주는 무료 라이브러리입니다.
Next 뿐만 아니라 여러 최신 JavaScript 프레임워크와 깊이 통합되어 시작하기 쉽고 확장하기 쉬우며 **항상 비공개로 안전한 인증 경험**을 제공합니다!

<Heading type="h3">Next Auth 제공 기능</Heading>

<Blockquote type="warn">
  해당 포스트는 **next-auth@5 beta** 버젼으로 **Next.js@15** 환경을 기준으로
  작성되었습니다. <br /> 프로젝트 호환 여부를 확인해주세요.
</Blockquote>

Next Auth에서 기본적으로 제공하는 기능은 로그인 기능, OAuth를 이용한 소셜 로그인과 이메일 로그인이 가능합니다.
JWT 토큰 사용, 세션 관리 등을 자동으로 암호화해서 보완하며 관리할 수 있는 기능을 제공해줍니다. 무엇보다 클라이언트와 서버에서 세션 관리를 할 수 있다는 점이 매우 매력적입니다.

<Heading type="h3">Next Auth v5 제공 기능</Heading>

공식 사이트에서 설명하는 새로운 메인 기능은 크게 5가지 입니다.

- App 라우터 우선(pages 라우터 역시 지원)
- preview 배포 환경에서도 OAuth 지원
- 간소화된 설정
- provider 새 계정 콜백 제공
- 엣지 브라우저 호환

그리고 기존의 `getServerSession`, `getSession`, `withAuth`, `getToken`, and `useSession` 대신에
`auth()` 메서드 하나로 클라이언트, 서버 어디서든 세션에 접근할 수 있습니다.

<Blockquote type="info">
  [공식 사이트 설명](https://authjs.dev/getting-started/migrating-to-v5)
</Blockquote>

<Heading type="h2">설치 및 세팅</Heading>

<Heading type="h3">1. 설치</Heading>

일단 NextJS 환경을 구축해주시고 설치해야합니다.

```js
// npm
npm install next-auth@beta

// pnpm
pnpm add next-auth@beta

// yarn
yarn add next-auth@beta

// bun
bun add next-auth@beta
```

<Heading type="h3">2. 환경 변수</Heading>

필수적인 유일한 환경 변수는 **AUTH_SECRET**입니다. 이 값은 라이브러리에서 토큰과 이메일 인증 해시를 **암호화**하는 데 사용되는 임의의 값입니다.

```bash
npx auth secret
```
